<main class="content">
  <dialog class="modal" #dialog>
    <div class="btn-close-content">
      <button class="btn-close-modal" (click)="closeDialog()">
        <img width="30" height="30" src="../../../assets/close.svg" />
      </button>
    </div>
    <div class="quantity-content">
      <h2>Altere a quantidade</h2>
      <div class="quantity">
        <button
          class="btn"
          [ngClass]="{ 'btn-disabled': orderToEdit.quantity <= 1 }"
          [disabled]="orderToEdit.quantity === 1"
          (click)="orderToEdit.quantity = orderToEdit.quantity - 1"
        >
          -
        </button>
        <span>{{ orderToEdit.quantity }}</span>
        <button
          class="btn"
          (click)="orderToEdit.quantity = orderToEdit.quantity + 1"
        >
          +
        </button>
      </div>
      <app-button
        [isDisabled]="false"
        buttonTitle="confirmar"
        size="large"
        styleButton="primary"
        (buttonAction)="closeDialog()"
      ></app-button>
    </div>
  </dialog>

  <dialog class="modal-edit" #dialogEdit>
    <div class="btn-close-content">
      <button class="btn-close-modal" (click)="closeDialogEdit()">
        <img width="30" height="30" src="../../../assets/close.svg" />
      </button>
    </div>
    <app-order
      [isEdit]="true"
      [orderEdit]="this.orderToEdit"
      (buttonAction)="deleteOrder(this.orderToEdit)"
      #appOrder
    ></app-order>
  </dialog>

  <div>
    <header>
      <h1 class="title">Resumo da conta</h1>
    </header>
    <section class="description" *ngFor="let order of orders; let i = index">
      <div class="icon">
        <a (click)="openDialog(order)">{{ order.quantity }}</a>
      </div>
      <a class="btn-description" (click)="openDialogEdit(order)">
        <div class="description-card">
          <h4>{{ order.name }}</h4>
          <div style="display: flex;">
            <legend class="description-names">
              {{ getFormattedUserNamesForDisplay(getMaxNumberOfUsersInDisplay(order.sharedUsers)) }}
            </legend>
            <a href="" (mouseout)="onMouseout(i);" (mouseover)="onHover(i);">
                <app-tooltip
                *ngIf="order.sharedUsers.length > maxNumberOfUsersInDisplay"
                [showTooltip]="tooltipDisplayStates[i]"
                [content]="getFormattedUserNamesForDisplay(order.sharedUsers)"
              >
              </app-tooltip>
            </a>
          </div>
        </div>
        <div class="description-price">
          <div class="price">
            <h3>
              {{ multiplyValues(order.quantity, order.price) | currency }}
            </h3>
            <legend>{{ order.price | currency }}</legend>
          </div>
          <button>
            <img width="8" src="../../../assets/icon _nav.svg" alt="" />
          </button>
        </div>
      </a>
    </section>
    <section class="service-payment">
      <h4>Taxa de servi√ßo</h4>
      <form action="" [formGroup]="orderForm">
        <div class="percent-content">
          <input
            formControlName="percent"
            type="number"
            name="percent"
            placeholder="10"
          />
          <h3>%</h3>
        </div>
      </form>
    </section>

    <section class="resume">
      <h2>Total</h2>
      <div>
        <h1>{{ sumTotalOrders() | currency }}</h1>
        <legend>com taxa de 10%</legend>
      </div>
    </section>
  </div>

  <footer class="button-content">
    <app-button
      [isDisabled]="false"
      buttonTitle="incluir item"
      size="small"
      styleButton="secondary"
      (buttonAction)="goToOrder()"
    ></app-button>
    <app-button
      [isDisabled]="false"
      buttonTitle="dividir"
      size="small"
      styleButton="primary"
    ></app-button>
  </footer>
</main>
